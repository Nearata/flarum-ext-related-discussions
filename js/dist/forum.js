(()=>{var t={n:o=>{var e=o&&o.__esModule?()=>o.default:()=>o;return t.d(e,{a:e}),e},d:(o,e)=>{for(var s in e)t.o(e,s)&&!t.o(o,s)&&Object.defineProperty(o,s,{enumerable:!0,get:e[s]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};(()=>{"use strict";t.r(o);const e=flarum.core.compat["forum/app"];var s=t.n(e);const r=flarum.core.compat["common/extend"],n=flarum.core.compat["forum/components/PostStream"];var i=t.n(n);const a=flarum.core.compat["common/models/Discussion"];var c=t.n(a);function u(t,o){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t},u(t,o)}const l=flarum.core.compat["common/Component"];var p=t.n(l);const d=flarum.core.compat["common/components/Placeholder"];var f=t.n(d);const y=flarum.core.compat["forum/components/DiscussionListItem"];var h=t.n(y);function v(t,o){(null==o||o>t.length)&&(o=t.length);for(var e=0,s=new Array(o);e<o;e++)s[e]=t[e];return s}var b=function(t){var o,e;function r(){for(var o,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return(o=t.call.apply(t,[this].concat(s))||this).discussions=[],o.position=1,o}e=t,(o=r).prototype=Object.create(e.prototype),o.prototype.constructor=o,u(o,e);var n=r.prototype;return n.oninit=function(o){t.prototype.oninit.call(this,o),this.discussions=this.attrs.discussions,this.position=this.attrs.position},n.oncreate=function(o){t.prototype.oncreate.call(this,o);for(var e,s=function(t,o){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(e)return(e=e.call(t)).next.bind(e);if(Array.isArray(t)||(e=function(t,o){if(t){if("string"==typeof t)return v(t,o);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?v(t,o):void 0}}(t))||o&&t&&"number"==typeof t.length){e&&(t=e);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.element.querySelectorAll(".DiscussionListItem-controls"));!(e=s()).done;)e.value.remove()},n.view=function(){var t=s().forum.attribute("nearataRelatedDiscussionsAllowGuests");if(s().session.user||t)return m(".DiscussionList.nearataRelatedDiscussions.position"+this.position,[m("h3.DiscussionList-title",s().translator.trans("nearata-related-discussions.forum.discussion_list_title")),this.discussions.length?[m("ul.DiscussionList-discussions[role=feed]",[this.discussions.map((function(t,o){return m("li",{"data-id":t.id(),role:"article","aria-setsize":"-1","aria-posinset":o},[m(h(),{discussion:t,params:{}})])}))])]:m(f(),{text:s().translator.trans("nearata-related-discussions.forum.no_results")})])},r}(p());s().initializers.add("nearata/related-discussions",(function(){s().store.models.nearataRelatedDiscussions=c(),c().prototype.nearataRelatedDiscussions=c().hasMany("nearataRelatedDiscussions"),(0,r.extend)(i().prototype,"view",(function(t){var o=s().forum.attribute("nearataRelatedDiscussionsPosition"),e=this.discussion.nearataRelatedDiscussions();"first_post"===o&&t.children.splice(1,0,m(b,{discussions:e,position:1})),"last_post"===o&&t.children.splice(t.children.length-1,0,m(b,{discussions:e,position:2}))}))}))})(),module.exports=o})();
//# sourceMappingURL=forum.js.map
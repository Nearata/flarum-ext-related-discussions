(()=>{var t={n:s=>{var o=s&&s.__esModule?()=>s.default:()=>s;return t.d(o,{a:o}),o},d:(s,o)=>{for(var i in o)t.o(o,i)&&!t.o(s,i)&&Object.defineProperty(s,i,{enumerable:!0,get:o[i]})},o:(t,s)=>Object.prototype.hasOwnProperty.call(t,s),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},s={};(()=>{"use strict";function o(t,s){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,s){return t.__proto__=s,t},o(t,s)}t.r(s);const i=flarum.core.compat["forum/app"];var e=t.n(i),n=function(){function t(t){this.discussionId=void 0,this.loading=void 0,this.data=void 0,this.discussionId=t,this.loading=!0,this.data=[]}var s=t.prototype;return s.load=function(){var t=this;e().store.find("discussions",{"filter[nearataRelatedDiscussions]":this.discussionId}).then((function(s){var o;(o=t.data).push.apply(o,s),t.loading=!1,m.redraw()}))},s.isLoading=function(){return this.loading},s.getData=function(){return this.data},t}();const a=flarum.core.compat["common/Component"];var r=t.n(a);const c=flarum.core.compat["common/components/LoadingIndicator"];var u=t.n(c);const d=flarum.core.compat["common/components/Placeholder"];var l=t.n(d);const p=flarum.core.compat["forum/components/DiscussionListItem"];var f=t.n(p),h=function(t){var s,i;function a(){for(var s,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(s=t.call.apply(t,[this].concat(i))||this).relatedDiscussionState=void 0,s.discussionId=void 0,s.position=void 0,s}i=t,(s=a).prototype=Object.create(i.prototype),s.prototype.constructor=s,o(s,i);var r=a.prototype;return r.oninit=function(s){t.prototype.oninit.call(this,s),this.position=this.attrs.position,this.relatedDiscussionState=new n(this.attrs.discussionId),this.relatedDiscussionState.load()},r.currentStatusElement=function(){return this.relatedDiscussionState.isLoading()?m(u(),null):this.relatedDiscussionState.getData().length?this.relatedDiscussionState.getData().map((function(t,s){return m("li",{"data-id":t.id(),role:"article","aria-setsize":"-1","aria-posinset":s},m(f(),{discussion:t,params:{}}))})):m(l(),{text:e().translator.trans("nearata-related-discussions.forum.no_results")})},r.view=function(){return m("div",{class:"DiscussionList nearataRelatedDiscussions position"+this.position},m("h3",{class:"h3 DiscussionList-title"},e().translator.trans("nearata-related-discussions.forum.discussion_list_title")),m("ul",{class:"DiscussionList-discussions",role:"feed"},this.currentStatusElement()))},a}(r());const v=flarum.core.compat["common/extend"],y=flarum.core.compat["forum/components/PostStream"];var g=t.n(y);e().initializers.add("nearata/related-discussions",(function(){(0,v.extend)(g().prototype,"view",(function(t){var s=e().forum.attribute("nearataRelatedDiscussionsAllowGuests");if(e().session.user||s){var o=this.discussion.id(),i=e().forum.attribute("nearataRelatedDiscussionsPosition"),n="nearataRelatedDiscussions";"first_post"===i&&t.children.splice(1,0,m(h,{key:n,discussionId:o,position:1})),"last_post"===i&&t.children.splice(t.children.length-1,0,m(h,{key:n,discussionId:o,position:2}))}}))}))})(),module.exports=s})();
//# sourceMappingURL=forum.js.map